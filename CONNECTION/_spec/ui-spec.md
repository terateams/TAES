# CONNECTION UI 规范

> TeamsEdge 界面交互设计
> 
> Version: 1.0.0

---

## 1. 设计原则

| 原则 | 说明 |
|------|------|
| **状态一目了然** | 5W 状态在一屏内可见 |
| **操作最小化** | 常用操作不超过 2 次点击 |
| **异常醒目** | 问题状态使用红色警示 |
| **成本可见** | 随时知道资源消耗 |

---

## 2. 主界面布局

### 2.1 个人状态卡片

```
┌─────────────────────────────────────────────────────────────┐
│  CONNECTION                                    [设置] [帮助] │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                     │   │
│  │  👤 张三                           🟢 ACTIVE        │   │
│  │                                                     │   │
│  │  ┌─────────┬─────────┬─────────┬─────────┬───────┐ │   │
│  │  │  📍     │  ⏰     │  💻     │  🌐     │  🔑   │ │   │
│  │  │ Where   │  When   │  What   │  How    │  Who  │ │   │
│  │  ├─────────┼─────────┼─────────┼─────────┼───────┤ │   │
│  │  │ 办公室  │ ACTIVE  │ MacBook │ corp.vpn│ Full  │ │   │
│  │  │ office  │ 14:32   │ Pro     │ 45ms 🟢 │ NP    │ │   │
│  │  └─────────┴─────────┴─────────┴─────────┴───────┘ │   │
│  │                                                     │   │
│  │  ┌──────────────┐  ┌──────────────┐                │   │
│  │  │   切换场所   │  │    签 退     │                │   │
│  │  └──────────────┘  └──────────────┘                │   │
│  │                                                     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 状态指示器颜色

| 状态 | 颜色 | 图标 | 含义 |
|------|------|------|------|
| ACTIVE | 🟢 绿色 | ● | 工作中，全量连接 |
| STANDBY | 🟡 黄色 | ◐ | 待机，基本连接 |
| OFFLINE | ⚫ 灰色 | ○ | 离线 |
| ERROR | 🔴 红色 | ⚠ | 异常，需要处理 |

### 2.3 网络健康指示

| 延迟 | 状态 | 显示 |
|------|------|------|
| < 100ms | healthy | 🟢 {latency}ms |
| 100-300ms | degraded | 🟡 {latency}ms |
| > 300ms | slow | 🟠 {latency}ms |
| timeout | critical | 🔴 超时 |

---

## 3. 交互流程

### 3.1 签到流程

```
用户打开 TeamsEdge
       │
       ▼
  ┌──────────────┐
  │ 检测当前状态  │
  └──────┬───────┘
         │
    是 STANDBY？
         │
    ┌────┴────┐
    │ 是      │ 否
    ▼         ▼
┌────────┐  ┌────────┐
│显示签到 │  │显示当前 │
│  按钮  │  │  状态  │
└───┬────┘  └────────┘
    │
    ▼ 点击签到
┌──────────────┐
│ 选择工作场所  │
│  ▼ 下拉选择  │
│ ○ 办公室    │
│ ○ 车间     │
│ ○ 仓库     │
│ ● 居家     │
│ ○ 移动     │
└──────┬───────┘
       │
       ▼
┌──────────────┐
│  自动检测    │
│ • 设备信息   │
│ • 网络环境   │
│ • 延迟测试   │
└──────┬───────┘
       │
       ▼
┌──────────────┐
│  签到成功!   │
│ 状态: ACTIVE │
└──────────────┘
```

### 3.2 切换场所流程

```
点击 [切换场所]
       │
       ▼
┌──────────────────────────┐
│     选择新的工作场所      │
├──────────────────────────┤
│                          │
│  🏢 办公室  ← 当前       │
│  🏭 车间                 │
│  📦 仓库                 │
│  🏠 居家                 │
│  🚀 移动                 │
│                          │
│  [取消]      [确认切换]  │
└──────────────────────────┘
       │
       ▼ 确认切换
┌──────────────────────────┐
│      正在切换...         │
│                          │
│  • 断开当前连接          │
│  • 加载新场所配置  ✓     │
│  • 建立新连接     ⟳     │
│  • 测试网络延迟          │
└──────────────────────────┘
       │
       ▼
┌──────────────────────────┐
│      切换成功!           │
│                          │
│  新场所: 🏠 居家         │
│  通道: self_hosted       │
│  延迟: 120ms 🟢          │
└──────────────────────────┘
```

### 3.3 异常处理流程

```
检测到网络异常
       │
       ▼
┌──────────────────────────────┐
│  ⚠️ 网络连接异常             │
├──────────────────────────────┤
│                              │
│  当前延迟: 450ms (超过阈值)  │
│                              │
│  建议操作:                   │
│  • 切换备用通道              │
│  • 降级到 STANDBY 模式       │
│  • 检查本地网络              │
│                              │
│  [切换通道]  [降级]  [忽略]  │
└──────────────────────────────┘
```

---

## 4. 团队视图（管理员）

```
┌─────────────────────────────────────────────────────────────────────┐
│  CONNECTION - 团队总览                              2026-01-13 14:32 │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  状态摘要                                                           │
│  ─────────                                                          │
│  🟢 ACTIVE: 5    🟡 STANDBY: 2    ⚫ OFFLINE: 1                     │
│                                                                     │
│  今日成本: ¥127 / ¥200  [████████████░░░░░░░░] 63%                 │
│                                                                     │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  成员列表                                                           │
│  ─────────                                                          │
│                                                                     │
│  │ 成员     │ 场所    │ 状态    │ 通道      │ 延迟   │ 时长  │     │
│  ├──────────┼─────────┼─────────┼───────────┼────────┼───────┤     │
│  │ 张三     │ 🏢 办公室│ 🟢 ACTIVE│ corp.vpn  │ 45ms 🟢│ 6h 32m│     │
│  │ 李四     │ 🏠 居家  │ 🟢 ACTIVE│ self_host │ 156ms🟡│ 5h 45m│     │
│  │ 王五     │ 📦 仓库  │ 🟢 ACTIVE│ warehouse │ 89ms 🟢│ 4h 20m│     │
│  │ 赵六     │ 🚀 移动  │ 🟡 STANDBY│ mobile   │ 320ms🟠│ 2h 10m│     │
│  │ 钱七     │ 🏭 车间  │ 🟢 ACTIVE│ workshop │ 78ms 🟢│ 7h 00m│     │
│  │ 孙八     │ 🏠 居家  │ 🟢 ACTIVE│ self_host │ 134ms🟢│ 5h 15m│     │
│  │ 周九     │ -       │ 🟡 STANDBY│ -        │ -     │ 0h 30m│     │
│  │ 吴十     │ -       │ ⚫ OFFLINE│ -        │ -     │ 休假  │     │
│                                                                     │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  [紧急召回]  [强制降级]  [导出报表]  [刷新]                         │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 5. 通知设计

### 5.1 Toast 通知

```
┌────────────────────────────────┐
│ ✓ 签到成功                     │
│   已切换到 ACTIVE 状态         │
└────────────────────────────────┘

┌────────────────────────────────┐
│ ⚠️ 网络延迟升高                │
│   当前延迟 320ms，建议切换通道  │
│                    [立即处理]  │
└────────────────────────────────┘

┌────────────────────────────────┐
│ 🔔 紧急召回                    │
│   管理员请求您立即上线         │
│            [签到]    [稍后]   │
└────────────────────────────────┘
```

### 5.2 系统托盘图标

| 状态 | 图标 | 说明 |
|------|------|------|
| ACTIVE + Healthy | 🟢 | 正常工作中 |
| ACTIVE + Degraded | 🟡 | 工作中但网络不佳 |
| STANDBY | ◐ | 待机状态 |
| OFFLINE | ○ | 离线 |
| Error | 🔴 | 需要处理 |

---

## 6. 响应式设计

### 6.1 桌面端 (>1024px)

完整布局，显示所有信息和操作。

### 6.2 平板端 (768-1024px)

```
┌─────────────────────────┐
│  张三  🟢 ACTIVE        │
├─────────────────────────┤
│ 📍 办公室  │ ⏰ 14:32   │
│ 💻 MacBook │ 🌐 45ms 🟢 │
├─────────────────────────┤
│ [切换场所]  [签退]      │
└─────────────────────────┘
```

### 6.3 手机端 (<768px)

```
┌─────────────────┐
│ 🟢 ACTIVE       │
│ 张三            │
├─────────────────┤
│ 📍 办公室       │
│ 🌐 45ms 🟢      │
├─────────────────┤
│    [签退]       │
└─────────────────┘
```

---

## 7. 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+Shift+C` | 打开 Connection 面板 |
| `Ctrl+Shift+I` | 快速签到 |
| `Ctrl+Shift+O` | 快速签退 |
| `Ctrl+Shift+W` | 切换工作场所 |
| `Ctrl+Shift+H` | 健康检查 |
