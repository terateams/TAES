# TeamsEdge 规范同步策略

> **核心原则**：TAES Repo 是规范源头，TeamsEdge 实例应主动对齐。

---

## 同步触发条件

| 触发类型 | 条件 | 动作 |
|----------|------|------|
| **定期同步** | 每月 1 日 | 全量检查实例与规范的对齐度 |
| **规范变更** | Navigation-00.md 有 commit | 评估影响范围，更新实例契约 |
| **实例上线** | 新功能发布 | 更新 YAML 中的 status 字段 |

---

## 同步流程

```
1. 规范变更（TAES Repo）
   │
   ├─→ 2. 评估影响
   │      ├── Breaking Change？
   │      └── 涉及哪些 L1/L2 菜单？
   │
   ├─→ 3. 更新实例契约
   │      └── 修改 TE3.lsn189.cn.yaml
   │
   ├─→ 4. 通知 TeamsEdge Repo
   │      └── 创建 Issue 或 PR
   │
   └─→ 5. 实例部署后
          └── 更新 status: enabled
```

---

## 变更分级

| 级别 | 定义 | 响应时间 | 示例 |
|:----:|------|:--------:|------|
| **P0** | Breaking Change | 24h | 菜单重命名、删除 |
| **P1** | 功能新增 | 1 周 | 新 L2 菜单 |
| **P2** | 优化调整 | 1 月 | UX 建议、字段调整 |
| **P3** | 文档更新 | 下次定期 | 注释、说明 |

---

## 差异处理

当实例无法立即对齐规范时：

1. **记录差异**：在 YAML 的 `deviations` 字段中登记
2. **设定目标**：明确 `target_date` 和 `priority`
3. **定期回顾**：月度同步时检查差异是否已消除

---

## 责任矩阵

| 动作 | TAES Repo | TeamsEdge Repo | 运维 |
|------|:---------:|:--------------:|:----:|
| 规范定义 | ✅ | — | — |
| 契约更新 | ✅ | — | — |
| 功能实现 | — | ✅ | — |
| 实例部署 | — | — | ✅ |
| 状态反馈 | — | ✅ | ✅ |

---

## 验收标准

- [ ] 实例 YAML 与 Navigation-00.md 版本号一致
- [ ] 所有 `enabled` 菜单可正常访问
- [ ] 所有 `deviations` 有明确的 target_date
- [ ] 月度同步记录可追溯

---

*版本: v1.0 | 创建日期: 2026-01-21*
